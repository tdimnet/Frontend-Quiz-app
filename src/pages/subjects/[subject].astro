---
type Question = {
  answer: string;
  options: string[];
  question: string;
};

interface Props {
  quizData: {
    color: string;
    icon: string;
    questions: Question[];
    title: string;
  };
}

import type { GetStaticPaths } from "astro";

import data from "../../data.json";

import DefaultLayout from "../../layouts/DefaultLayout.astro";

export const getStaticPaths = (() => {
  return [
    {
      params: { subject: "html" },
      props: {
        quizData: data.quizzes.filter((quiz) => quiz.title === "HTML")[0],
      },
    },
    {
      params: { subject: "css" },
      props: {
        quizData: data.quizzes.filter((quiz) => quiz.title === "CSS")[0],
      },
    },
    {
      params: { subject: "javascript" },
      props: {
        quizData: data.quizzes.filter((quiz) => quiz.title === "JavaScript")[0],
      },
    },
    {
      params: { subject: "accessibility" },
      props: {
        quizData: data.quizzes.filter(
          (quiz) => quiz.title === "Accessibility"
        )[0],
      },
    },
  ];
}) satisfies GetStaticPaths;

const { subject } = Astro.params;
const { quizData: {
  color,
  icon,
  title,
  questions
} } = Astro.props;
---

<DefaultLayout
  color={color}
  icon={icon}
  title={title}
>
  The subject is {subject}
</DefaultLayout>

<script define:vars={{ questions }}>
  console.log("====");
  console.log(questions);
  console.log("====");
</script>
